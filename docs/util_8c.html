<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IoT-MBBR (masterthesis): firmware/EFM32HG222F64_iot-mbbr/src/util.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IoT-MBBR (masterthesis)
   </div>
   <div id="projectbrief">Masterthesis upgrading a Moving Bed BioReactor with extra sensors and cloud connectivity.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('util_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">util.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;em_cmu.h&quot;</code><br />
<code>#include &quot;em_gpio.h&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pin__mapping_8h_source.html">pin_mapping.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__dbprint_8h_source.html">debug_dbprint.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="delay_8h_source.html">delay.h</a>&quot;</code><br />
</div>
<p><a href="util_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a17d0d22e49fb045aa0508b77edaeb7e2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a17d0d22e49fb045aa0508b77edaeb7e2">initGNDd</a> (void)</td></tr>
<tr class="memdesc:a17d0d22e49fb045aa0508b77edaeb7e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the initGNDd pin.  <a href="#a17d0d22e49fb045aa0508b77edaeb7e2">More...</a><br /></td></tr>
<tr class="separator:a17d0d22e49fb045aa0508b77edaeb7e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca2aee60bc1f735a333af0703a19f219"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#aca2aee60bc1f735a333af0703a19f219">gndd</a> (bool enabled)</td></tr>
<tr class="memdesc:aca2aee60bc1f735a333af0703a19f219"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable the GNDd pin.  <a href="#aca2aee60bc1f735a333af0703a19f219">More...</a><br /></td></tr>
<tr class="separator:aca2aee60bc1f735a333af0703a19f219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab212081592c908bf57b591e3c6e7483d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ab212081592c908bf57b591e3c6e7483d">error</a> (<a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> number)</td></tr>
<tr class="memdesc:ab212081592c908bf57b591e3c6e7483d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error method.  <a href="#ab212081592c908bf57b591e3c6e7483d">More...</a><br /></td></tr>
<tr class="separator:ab212081592c908bf57b591e3c6e7483d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a23665a34dee037d541a3f7c4de0da810"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a> = 0</td></tr>
<tr class="separator:a23665a34dee037d541a3f7c4de0da810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a575dc01dfe759189cf523ec2f55b6769"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a> = false</td></tr>
<tr class="separator:a575dc01dfe759189cf523ec2f55b6769"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility functionality. </p>
<dl class="section version"><dt>Version</dt><dd>4.0 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Brecht Van Eeckhoudt</dd></dl>
<hr/>
<h1><a class="anchor" id="Versions"></a>
Versions</h1>
<ul>
<li>v1.0: Started with the code from <a href="https://github.com/Fescron/Project-LabEmbeddedDesign1/tree/master/code/SLSTK3400A_ADXL362">https://github.com/Fescron/Project-LabEmbeddedDesign1/tree/master/code/SLSTK3400A_ADXL362</a> </li>
<li>v1.1: Changed PinModeSet DOUT value to 0 in initLED. </li>
<li>v1.2: Removed unnecessary <code>GPIO_PinOutClear</code> line in initLED. </li>
<li>v1.3: Moved initRTCcomp method from <code><a class="el" href="main_8c.html" title="The main file for the IoT-MBBR project. ">main.c</a></code> to here, added delay functionality which goes into EM1 or EM2. </li>
<li>v1.4: Moved delay functionality to specific header and source files. </li>
<li>v2.0: Changed <code>Error()</code> to <code><a class="el" href="util_8c.html#ab212081592c908bf57b591e3c6e7483d" title="Error method. ">error()</a></code>, added a global variable to keep the error number and initialize the pin of the LED automatically. </li>
<li>v2.1: Changed initLED to be a static (~hidden) method and also made the global variables static. </li>
<li>v2.2: Added peripheral clock enable/disable functionality for energy saving purposes, only added necessary includes in header file, moved the others to the source file, updated documentation, replaced SysTick delay with RTCC delay, changed error delay length. </li>
<li>v2.3: Changed name of static variable, simplified some logic. </li>
<li>v2.4: Stopped disabling the GPIO clock. </li>
<li>v2.5: Moved documentation. </li>
<li>v2.6: Updated code with new DEFINE checks. </li>
<li>v2.7: Added functionality to send error values using LoRaWAN. </li>
<li>v2.8: Added the ability to enable/disable error forwarding to the cloud using a public definition and changed UART error color. </li>
<li>v3.0: Updated version number. </li>
<li>v3.1: Removed <code>static</code> before the local variables (not necessary). </li>
<li>v4.0: Changed functionality for new board type.</li>
</ul>
<hr/>
<h1><a class="anchor" id="License"></a>
License</h1>
<p><b>Copyright (C) 2020 - Brecht Van Eeckhoudt</b></p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the <b>GNU General Public License</b> as published by the Free Software Foundation, either <b>version 3</b> of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p><em>A copy of the GNU General Public License can be found in the <code>LICENSE</code> file along with this source code.</em></p>
<p><br />
 Some methods use code obtained from examples from <a href="https://github.com/SiliconLabs/peripheral_examples">Silicon Labs' GitHub</a>. These sections are licensed under the Silabs License Agreement. See the file "Silabs_License_Agreement.txt" for details. Before using this software for any purpose, you must agree to the terms of that agreement. </p>

<p class="definition">Definition in file <a class="el" href="util_8c_source.html">util.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab212081592c908bf57b591e3c6e7483d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab212081592c908bf57b591e3c6e7483d">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error method. </p>
<p><b>ERROR_FORWARDING == 0</b><br />
 The method flashes the LED, displays a UART message and holds the MCU forever in a loop until it gets reset. The error value gets stored in a global variable.</p>
<p><b>ERROR_FORWARDING == 1</b><br />
 The method sends the error value to the cloud using LoRaWAN if the error number doesn't correspond to LoRaWAN-related functionality (numbers 30 - 55).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">number</td><td>The number to indicate where in the code the error was thrown. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00122">122</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">/* Initialize GNDd if not already the case */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a>) <a class="code" href="util_8c.html#a17d0d22e49fb045aa0508b77edaeb7e2">initGNDd</a>();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/* Save the given number in the global variable */</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a> = number;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#if ERROR_FORWARDING == 0 </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error (&quot;</span>, 5);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! Please reset MCU. &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">/* Nothing here */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">/* Check if the error number isn&#39;t called in BG96 functionality */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> ((number &lt; 30) || (number &gt; 55))</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error (&quot;</span>, 5);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! Sending the message to the cloud. &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">//      initLoRaWAN(); /* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">//      sendStatus(number); /* Send the status value */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">//      disableLoRaWAN(); /* Disable RN2483 */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error in BG96 functionality (&quot;</span>, 5);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div><div class="ttc" id="util_8c_html_a575dc01dfe759189cf523ec2f55b6769"><div class="ttname"><a href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a></div><div class="ttdeci">bool GNDd_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00076">util.c:76</a></div></div>
<div class="ttc" id="util_8c_html_a17d0d22e49fb045aa0508b77edaeb7e2"><div class="ttname"><a href="util_8c.html#a17d0d22e49fb045aa0508b77edaeb7e2">initGNDd</a></div><div class="ttdeci">static void initGNDd(void)</div><div class="ttdoc">Initialize the initGNDd pin. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00184">util.c:184</a></div></div>
<div class="ttc" id="dbprint_8c_html_a4e4e18f85e358d8cc702ea8c2f190503"><div class="ttname"><a href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a></div><div class="ttdeci">void dbprintInt(int32_t value)</div><div class="ttdoc">Print a number in decimal notation to USARTx. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00740">dbprint.c:740</a></div></div>
<div class="ttc" id="dbprint_8c_html_aeac6ad47896a658b0753fa0ef8040e6c"><div class="ttname"><a href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a></div><div class="ttdeci">void dbprintln_color(char *message, dbprint_color_t color)</div><div class="ttdoc">Print a string (char array) to USARTx in a given color and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00482">dbprint.c:482</a></div></div>
<div class="ttc" id="util_8c_html_a23665a34dee037d541a3f7c4de0da810"><div class="ttname"><a href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a></div><div class="ttdeci">uint8_t errorNumber</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00075">util.c:75</a></div></div>
<div class="ttc" id="dbprint_8c_html_ad6b8e79e52a31b01f5816cdd62fb1746"><div class="ttname"><a href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a></div><div class="ttdeci">void dbprint_color(char *message, dbprint_color_t color)</div><div class="ttdoc">Print a string (char array) to USARTx in a given color. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00423">dbprint.c:423</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca2aee60bc1f735a333af0703a19f219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca2aee60bc1f735a333af0703a19f219">&#9670;&nbsp;</a></span>gndd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gndd </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable the GNDd pin. </p>
<p>This method also initializes the pin-mode if necessary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enabled</td><td><ul>
<li><code>true</code> - Enable GNDd. </li>
<li><code>false</code> - Disable GNDd. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00094">94</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/* Initialize GNDd if not already the case */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a>) <a class="code" href="util_8c.html#a17d0d22e49fb045aa0508b77edaeb7e2">initGNDd</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* Set the selected state */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (enabled) GPIO_PinOutSet(<a class="code" href="pin__mapping_8h.html#aee0b80645a1f1a3716cc205aa9f7387c">DBG_GNDD_PORT</a>, <a class="code" href="pin__mapping_8h.html#abb91efcd3640abf2458ef2184ce3805c">DBG_GNDD_PIN</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">else</span> GPIO_PinOutClear(<a class="code" href="pin__mapping_8h.html#aee0b80645a1f1a3716cc205aa9f7387c">DBG_GNDD_PORT</a>, <a class="code" href="pin__mapping_8h.html#abb91efcd3640abf2458ef2184ce3805c">DBG_GNDD_PIN</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div><div class="ttc" id="util_8c_html_a575dc01dfe759189cf523ec2f55b6769"><div class="ttname"><a href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a></div><div class="ttdeci">bool GNDd_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00076">util.c:76</a></div></div>
<div class="ttc" id="util_8c_html_a17d0d22e49fb045aa0508b77edaeb7e2"><div class="ttname"><a href="util_8c.html#a17d0d22e49fb045aa0508b77edaeb7e2">initGNDd</a></div><div class="ttdeci">static void initGNDd(void)</div><div class="ttdoc">Initialize the initGNDd pin. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00184">util.c:184</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_aee0b80645a1f1a3716cc205aa9f7387c"><div class="ttname"><a href="pin__mapping_8h.html#aee0b80645a1f1a3716cc205aa9f7387c">DBG_GNDD_PORT</a></div><div class="ttdeci">#define DBG_GNDD_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00095">pin_mapping.h:95</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_abb91efcd3640abf2458ef2184ce3805c"><div class="ttname"><a href="pin__mapping_8h.html#abb91efcd3640abf2458ef2184ce3805c">DBG_GNDD_PIN</a></div><div class="ttdeci">#define DBG_GNDD_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00096">pin_mapping.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a17d0d22e49fb045aa0508b77edaeb7e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d0d22e49fb045aa0508b77edaeb7e2">&#9670;&nbsp;</a></span>initGNDd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initGNDd </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the initGNDd pin. </p>
<dl class="section note"><dt>Note</dt><dd>This is a static method because it's only internally used in this file and called by other methods if necessary. </dd></dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00184">184</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">/* Enable necessary clocks (just in case) */</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    CMU_ClockEnable(cmuClock_HFPER, <span class="keyword">true</span>); <span class="comment">/* GPIO is a High Frequency Peripheral */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    CMU_ClockEnable(cmuClock_GPIO, <span class="keyword">true</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">/* In the case of gpioModePushPull, the last argument directly sets the pin state */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#aee0b80645a1f1a3716cc205aa9f7387c">DBG_GNDD_PORT</a>, <a class="code" href="pin__mapping_8h.html#abb91efcd3640abf2458ef2184ce3805c">DBG_GNDD_PIN</a>, gpioModePushPull, 0);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a>(<span class="stringliteral">&quot;GNDd pin initialized&quot;</span>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="util_8c_html_a575dc01dfe759189cf523ec2f55b6769"><div class="ttname"><a href="util_8c.html#a575dc01dfe759189cf523ec2f55b6769">GNDd_initialized</a></div><div class="ttdeci">bool GNDd_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00076">util.c:76</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_aee0b80645a1f1a3716cc205aa9f7387c"><div class="ttname"><a href="pin__mapping_8h.html#aee0b80645a1f1a3716cc205aa9f7387c">DBG_GNDD_PORT</a></div><div class="ttdeci">#define DBG_GNDD_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00095">pin_mapping.h:95</a></div></div>
<div class="ttc" id="dbprint_8c_html_acb5d4e1082c625ad85d835d4e053d4d8"><div class="ttname"><a href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a></div><div class="ttdeci">void dbinfo(char *message)</div><div class="ttdoc">Print an info string (char array) to USARTx and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00505">dbprint.c:505</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_abb91efcd3640abf2458ef2184ce3805c"><div class="ttname"><a href="pin__mapping_8h.html#abb91efcd3640abf2458ef2184ce3805c">DBG_GNDD_PIN</a></div><div class="ttdeci">#define DBG_GNDD_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00096">pin_mapping.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a23665a34dee037d541a3f7c4de0da810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23665a34dee037d541a3f7c4de0da810">&#9670;&nbsp;</a></span>errorNumber</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vl53l1__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> errorNumber = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00075">75</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

</div>
</div>
<a id="a575dc01dfe759189cf523ec2f55b6769"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a575dc01dfe759189cf523ec2f55b6769">&#9670;&nbsp;</a></span>GNDd_initialized</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GNDd_initialized = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00076">76</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="dir_9a5a365c58dea0dc152d55f461feaba5.html">EFM32HG222F64_iot-mbbr</a></li><li class="navelem"><a class="el" href="dir_07cf71b65af3d7a9f5557ec1f8ea51c9.html">src</a></li><li class="navelem"><a class="el" href="util_8c.html">util.c</a></li>
    <li class="footer">Generated on Thu Sep 3 2020 04:44:25 for IoT-MBBR (masterthesis) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
